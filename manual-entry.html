<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Powerball Manual Entry</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #e74c3c;
            margin-top: 5px;
        }
        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }
        .stat-section {
            margin: 25px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        .stat-section h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .draw-card {
            background: white;
            border-radius: 12px;
            padding: 18px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
            position: relative;
            border: 1px solid #e0e0e0;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .draw-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        
        .draw-card.dp {
            background-color: #f8f9fa;
            border-left: 4px solid #4a90e2;
        }
        
        .analysis-summary {
            margin-top: 12px;
            padding: 12px;
            background: #f9fafb;
            border-radius: 8px;
            font-size: 0.85em;
            color: #4a5568;
            border: 1px solid #edf2f7;
        }
        
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 8px;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            padding: 4px 0;
        }
        
        .stat-label {
            font-size: 0.75em;
            color: #718096;
            margin-bottom: 2px;
        }
        
        .stat-value {
            font-weight: 600;
            color: #2d3748;
        }
        
        .notes {
            margin-top: 10px;
            padding: 8px;
            background: #fff8e1;
            border-left: 3px solid #ffc107;
            font-size: 0.85em;
            color: #5d4037;
            border-radius: 0 4px 4px 0;
        }
        
        .analysis-summary > div {
            margin: 4px 0;
            display: flex;
            justify-content: space-between;
        }
        
        .analysis-summary > div::after {
            content: '';
            flex: 1;
            border-bottom: 1px dotted #ddd;
            margin: 0 8px 4px;
        }
        
        h1 {
            color: #e31837;
            text-align: center;
            margin-bottom: 30px;
        }
        .entry-form {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            align-items: center;
        }
        .form-row label {
            min-width: 120px;
            font-weight: 600;
        }
        input[type="number"] {
            width: 70px;
            height: 40px;
            text-align: center;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 5px;
        }
        .number-inputs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        .number-inputs input {
            flex: 0 0 auto;
        }
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-save {
            background-color: #28a745;
            color: white;
        }
        .btn-save:hover {
            background-color: #218838;
        }
        .btn-download {
            background-color: #007bff;
            color: white;
        }
        .btn-download:hover {
            background-color: #0056b3;
        }
        .btn-clear {
            background-color: #dc3545;
            color: white;
        }
        .btn-clear:hover {
            background-color: #c82333;
        }
        .draws-list {
            margin-top: 30px;
        }
        .draw-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .draw-numbers {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin: 15px 0;
            padding: 12px 0;
            border-bottom: 1px dashed #f0f0f0;
        }
        .number-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e74c3c;
            color: white;
            font-weight: bold;
        }
        .powerball-badge {
            background: #f1c40f;
            color: #000;
        }
        .draw-date {
            font-weight: 600;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Lottery Number Entry</h1>
        
        <div class="entry-form card">
            <div class="form-group">
                <div class="form-row">
                    <label for="drawDate">Draw Date:</label>
                    <input type="date" id="drawDate" class="form-control" required>
                </div>
                
                <div class="form-row">
                    <label>Main Numbers (1-69):</label>
                    <div class="number-inputs">
                        <input type="number" id="num1" min="1" max="69" placeholder="#" required>
                        <input type="number" id="num2" min="1" max="69" placeholder="#" required>
                        <input type="number" id="num3" min="1" max="69" placeholder="#" required>
                        <input type="number" id="num4" min="1" max="69" placeholder="#" required>
                        <input type="number" id="num5" min="1" max="69" placeholder="#" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <label for="powerball">Powerball (1-26):</label>
                    <input type="number" id="powerball" min="1" max="26" placeholder="PB" required>
                </div>
                
                <div class="form-row">
                    <label>Double Play Numbers (1-69):</label>
                    <div class="number-inputs">
                        <input type="number" id="dp_num1" min="1" max="69" placeholder="#">
                        <input type="number" id="dp_num2" min="1" max="69" placeholder="#">
                        <input type="number" id="dp_num3" min="1" max="69" placeholder="#">
                        <input type="number" id="dp_num4" min="1" max="69" placeholder="#">
                        <input type="number" id="dp_num5" min="1" max="69" placeholder="#">
                    </div>
                </div>
                
                <div class="form-row">
                    <label for="dp_powerball">DP Powerball (1-26):</label>
                    <input type="number" id="dp_powerball" min="1" max="26" placeholder="PB">
                </div>

        
        <!-- Draw Analysis Section -->
        <div class="stat-section">
            <h3>Draw Analysis</h3>
            <div class="form-group">
                <div class="form-row">
                    <label>Sum:</label>
                    <input type="number" id="sum" class="analysis-input" min="15" max="365">
                </div>
                <div class="form-row">
                    <label>Sum with Powerball:</label>
                    <input type="number" id="sumWithPB" class="analysis-input" min="16" max="391">
                </div>
                <div class="form-row">
                    <label>Odd/Even:</label>
                    <div class="number-inputs">
                        <input type="number" id="odds" class="analysis-input" min="0" max="5" placeholder="Odds"> /
                        <input type="number" id="evens" class="analysis-input" min="0" max="5" placeholder="Evens">
                    </div>
                </div>
                <div class="form-row">
                    <label>Low/High (≤35):</label>
                    <div class="number-inputs">
                        <input type="number" id="lows" class="analysis-input" min="0" max="5" placeholder="Lows"> /
                        <input type="number" id="highs" class="analysis-input" min="0" max="5" placeholder="Highs">
                    </div>
                </div>
                <div class="form-row">
                    <label>Same Endings:</label>
                    <input type="number" id="sameEnding" class="analysis-input" min="0" max="4" placeholder="0-4">
                </div>
                <div class="form-row">
                    <label>Consecutive Pairs:</label>
                    <input type="number" id="consecutive" class="analysis-input" min="0" max="4" placeholder="0-4">
                </div>
                <div class="form-row">
                    <label>Neighboring Pairs (≤5):</label>
                    <input type="number" id="neighbors" class="analysis-input" min="0" max="10" placeholder="0-10">
                </div>
                <div class="form-row">
                    <label>Group Omitted (1-5):</label>
                    <select id="groupOmitted" class="analysis-input">
                        <option value="">Select Group</option>
                        <option value="1">1-12</option>
                        <option value="2">13-24</option>
                        <option value="3">25-36</option>
                        <option value="4">37-49</option>
                        <option value="5">50-69</option>
                        <option value="none">None</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Low/High End:</label>
                    <div class="number-inputs">
                        <input type="number" id="lowEnd" class="analysis-input" min="1" max="65" placeholder="Low"> /
                        <input type="number" id="highEnd" class="analysis-input" min="5" max="69" placeholder="High">
                    </div>
                </div>
                <div class="form-row">
                    <label>Hits (≤10/≤25/≤50):</label>
                    <div class="number-inputs">
                        <input type="number" id="hit10" class="analysis-input" min="0" max="5" placeholder="≤10"> /
                        <input type="number" id="hit25" class="analysis-input" min="0" max="5" placeholder="≤25"> /
                        <input type="number" id="hit50" class="analysis-input" min="0" max="5" placeholder="≤50">
                    </div>
                </div>
            </div>
        </div>
        
        <div class="buttons">
            <button class="btn-save" id="saveBtn">Save Draw</button>
            <button class="btn-download" id="downloadBtn">Download Data</button>
            <button class="btn-clear" id="clearBtn">Clear Form</button>
        </div>
    </div>
    
    <div class="draws-list" id="drawsList">
        <!-- Saved draws will appear here -->
    </div>

    <script>
        // Global variables
        let draws = [];
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved draws
            draws = JSON.parse(localStorage.getItem('powerballDraws') || '[]');
            
            // Set default date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('drawDate').value = today;
            
            // Initial render
            renderDraws();
            
            // Set focus to first input
            const firstInput = document.getElementById('num1');
            if (firstInput) firstInput.focus();
        });
        
        function saveDraw() {
            try {
                const drawDate = document.getElementById('drawDate').value;
                
                if (!drawDate) {
                    alert('Please select a draw date');
                    return;
                }
                
                // Get main numbers
                const numbers = [
                    parseInt(document.getElementById('num1').value) || 0,
                    parseInt(document.getElementById('num2').value) || 0,
                    parseInt(document.getElementById('num3').value) || 0,
                    parseInt(document.getElementById('num4').value) || 0,
                    parseInt(document.getElementById('num5').value) || 0
                ];
                
                const powerball = parseInt(document.getElementById('powerball').value) || 0;
                
                // Get Double Play numbers if they exist
                let dpNumbers = [];
                let dpPowerball = null;
                
                const dpNum1 = document.getElementById('dp_num1');
                if (dpNum1 && dpNum1.value) {
                    dpNumbers = [
                        parseInt(document.getElementById('dp_num1').value) || 0,
                        parseInt(document.getElementById('dp_num2').value) || 0,
                        parseInt(document.getElementById('dp_num3').value) || 0,
                        parseInt(document.getElementById('dp_num4').value) || 0,
                        parseInt(document.getElementById('dp_num5').value) || 0
                    ];
                    dpPowerball = parseInt(document.getElementById('dp_powerball').value) || 0;
                }
                
                // Get analysis data
                const analysis = {
                    sum: document.getElementById('sum').value || '',
                    sumWithPB: document.getElementById('sumWithPB').value || '',
                    oddsEvens: {
                        odds: document.getElementById('odds').value || '0',
                        evens: document.getElementById('evens').value || '0'
                    },
                    lowHigh: {
                        lows: document.getElementById('lows').value || '0',
                        highs: document.getElementById('highs').value || '0'
                    },
                    sameEnding: document.getElementById('sameEnding').value || '0',
                    consecutive: document.getElementById('consecutive').value || '0',
                    neighbors: document.getElementById('neighbors').value || '0',
                    groupOmitted: document.getElementById('groupOmitted').value || '',
                    lowHighEnd: {
                        low: document.getElementById('lowEnd').value || '0',
                        high: document.getElementById('highEnd').value || '0'
                    },
                    hits: {
                        hit10: document.getElementById('hit10').value || '0',
                        hit25: document.getElementById('hit25').value || '0',
                        hit50: document.getElementById('hit50').value || '0'
                    }
                };
                
                // Validate numbers
                const isValid = numbers.every(n => n >= 1 && n <= 69) && 
                              (powerball >= 1 && powerball <= 26) &&
                              (dpNumbers.length === 0 || 
                               (dpNumbers.every(n => n >= 1 && n <= 69) && 
                                dpPowerball >= 1 && dpPowerball <= 26));
                
                if (!isValid) {
                    alert('Please enter valid numbers (1-69 for main numbers, 1-26 for Powerball)');
                    return;
                }
                
                // Create draw object
                const draw = {
                    id: Date.now(),
                    date: drawDate,
                    numbers: numbers,
                    powerball: powerball,
                    dpNumbers: dpNumbers.length > 0 ? dpNumbers : null,
                    dpPowerball: dpNumbers.length > 0 ? dpPowerball : null,
                    type: 'powerball',
                    analysis: analysis
                };
                
                // Add to draws array and save to localStorage
                const existingDraws = JSON.parse(localStorage.getItem('lotteryDraws') || '[]');
                existingDraws.unshift(draw);
                localStorage.setItem('lotteryDraws', JSON.stringify(existingDraws));
                
                // Update UI
                renderDraws();
                clearForm();
                
                alert('Draw saved successfully!');
                
            } catch (error) {
                console.error('Error saving draw:', error);
        }
    }

    function renderDraws() {
        const drawsList = document.getElementById('drawsList');
        if (!drawsList) return;

        const draws = JSON.parse(localStorage.getItem('lotteryDraws') || '[]');

        if (draws.length === 0) {
            drawsList.innerHTML = '<p>No saved draws yet. Add your first draw above.</p>';
            return;
        }

        let html = '<div class="draws-grid">';

        draws.forEach(draw => {
            // Main draw
            html += `
                <div class="draw-card">
                    <div class="draw-header">
                        <div>
                            <span class="draw-date">${draw.date}</span>
                            ${draw.analysis?.drawType === 'double-play' ? '<span class="draw-type">Double Play</span>' : ''}
                            ${draw.analysis?.drawType === 'special' ? '<span class="draw-type" style="background:#f3e5f5;color:#8e24aa">Special</span>' : ''}
                        </div>
                        <button class="delete-btn" title="Delete draw" data-id="${draw.id}">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                    <div class="draw-numbers">
                        ${draw.numbers.map(n => `<span class="number">${n}</span>`).join('')}
                        ${draw.powerball ? `<span class="powerball">${draw.powerball}</span>` : ''}
                    </div>`;
            
            // Add analysis summary if available
            if (draw.analysis) {
                html += `
                    <div class="analysis-summary">
                        <div class="analysis-grid">
                            <div class="stat-item">
                                <span class="stat-label">Sum</span>
                                <span class="stat-value">${draw.analysis.sum || 'N/A'}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Odd/Even</span>
                                <span class="stat-value">${draw.analysis.oddsEvens.odds}/${draw.analysis.oddsEvens.evens}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Low/High</span>
                                <span class="stat-value">${draw.analysis.lowHigh.lows}/${draw.analysis.lowHigh.highs}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Range</span>
                                <span class="stat-value">${draw.analysis.lowHighEnd?.low || 'N/A'}-${draw.analysis.lowHighEnd?.high || 'N/A'}</span>
                            </div>
                        </div>`;
                
                // Add notes if available
                if (draw.analysis.notes) {
                    html += `
                        <div class="notes">
                            <strong>📝</strong> ${draw.analysis.notes}
                        </div>`;
                }
                
                html += `</div>`;
            }
            
            html += `
                </div>`;

            // Double Play draw if it exists
            if (draw.dpNumbers) {
                html += `
                    <div class="draw-card dp">
                        <div class="draw-header">
                            <div>
                                <span class="draw-date">${draw.date}</span>
                                <span class="draw-type">Double Play</span>
                            </div>
                        </div>
                        <div class="draw-numbers">
                            ${draw.dpNumbers.map(n => `<span class="number">${n}</span>`).join('')}
                            ${draw.dpPowerball ? `<span class="powerball">${draw.dpPowerball}</span>` : ''}
                        </div>
                    </div>`;
            }
        });
        
        html += '</div>';
        drawsList.innerHTML = html;
    }
            
    // Download data as Text
    function downloadData() {
        try {
            const draws = JSON.parse(localStorage.getItem('lotteryDraws') || '[]');
            
            if (draws.length === 0) {
                alert('No data to download');
                return;
            }
            
            // Create text content
            let textContent = 'LOTTERY DRAWS AND ANALYSIS\n\n';
            
            draws.forEach((draw, index) => {
                textContent += `=== DRAW #${index + 1} (${draw.date}) ===\n`;
                textContent += `Main Numbers: ${draw.numbers.join(', ')} | Powerball: ${draw.powerball}\n`;
                
                if (draw.dpNumbers) {
                    textContent += `Double Play: ${draw.dpNumbers.join(', ')} | Powerball: ${draw.dpPowerball}\n`;
                }
                
                // Add analysis data if available
                if (draw.analysis) {
                    textContent += '\nANALYSIS\n';
                    textContent += `Sum: ${draw.analysis.sum || 'N/A'}\n`;
                    textContent += `Sum with Powerball: ${draw.analysis.sumWithPB || 'N/A'}\n`;
                    textContent += `Odd/Even: ${draw.analysis.oddsEvens.odds} odd / ${draw.analysis.oddsEvens.evens} even\n`;
                    textContent += `Low/High (≤35): ${draw.analysis.lowHigh.lows} low / ${draw.analysis.lowHigh.highs} high\n`;
                    textContent += `Same Endings: ${draw.analysis.sameEnding || '0'}\n`;
                    textContent += `Consecutive Pairs: ${draw.analysis.consecutive || '0'}\n`;
                    textContent += `Neighboring Pairs: ${draw.analysis.neighbors || '0'}\n`;
                    textContent += `Group Omitted: ${draw.analysis.groupOmitted || 'None'}\n`;
                    textContent += `Low/High End: ${draw.analysis.lowHighEnd.low} / ${draw.analysis.lowHighEnd.high}\n`;
                    textContent += `Hits (≤10/≤25/≤50): ${draw.analysis.hits.hit10}/${draw.analysis.hits.hit25}/${draw.analysis.hits.hit50}\n`;
                }
                
                textContent += '\n' + '-'.repeat(50) + '\n\n';
            });
            
            // Create download link
            const blob = new Blob([textContent], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            // Create and trigger download
            const link = document.createElement('a');
            link.href = url;
            link.download = `lottery_data_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(link);
            link.click();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            }, 100);
            
        } catch (error) {
            console.error('Error downloading data:', error);
            alert('Error downloading data. Please check the console for details.');
        }
            }
            
            function clearForm() {
                // Set today's date as default
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('drawDate').value = today;
                
                // Clear number inputs
                document.querySelectorAll('input[type="number"]').forEach(input => {
                    input.value = '';
                });
                
                // Clear analysis
                document.querySelectorAll('.analysis-input').forEach(input => {
                    input.value = '';
                });
                
                // Set focus to first number input
                document.getElementById('num1').focus();
            }
            
            // Delete a draw by ID
            function deleteDraw(id) {
                if (!confirm('Are you sure you want to delete this draw?')) return;
                
                const draws = JSON.parse(localStorage.getItem('lotteryDraws') || '[]');
                const updatedDraws = draws.filter(draw => draw.id !== id);
                localStorage.setItem('lotteryDraws', JSON.stringify(updatedDraws));
                renderDraws();
            }
            
        // Initialize event listeners
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('delete-btn')) {
                const id = parseInt(e.target.getAttribute('data-id'));
                deleteDraw(id);
            }
        });
        
        // Set up form event listeners
        document.addEventListener('DOMContentLoaded', function() {
            const saveBtn = document.getElementById('saveBtn');
            const clearBtn = document.getElementById('clearBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            
            if (saveBtn) saveBtn.addEventListener('click', saveDraw);
            if (clearBtn) clearBtn.addEventListener('click', clearForm);
            if (downloadBtn) downloadBtn.addEventListener('click', downloadData);
            
            // Auto-tab between number inputs
            document.querySelectorAll('.number-inputs input').forEach((input, index, inputs) => {
                input.addEventListener('input', (e) => {
                    if (e.target.value.length >= 2) {
                        if (index < inputs.length - 1) {
                            inputs[index + 1].focus();
                        } else if (document.getElementById('powerball')) {
                            document.getElementById('powerball').focus();
                        }
                    }
                });
            });
        });
        </script>
</body>
</html>
